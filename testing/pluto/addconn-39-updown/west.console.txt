/testing/guestbin/swan-prep --nokeys
Creating empty NSS database
west #
 cp ../../guestbin/updown.sh /tmp
west #
 chmod a+x /tmp/updown.sh
west #
 ipsec start
Redirecting to: [initsystem]
west #
 ../../guestbin/wait-until-pluto-started
west #
 ipsec add addconn
"addconn": added unoriented IKEv2 connection (neither left=1.2.3.4 nor right=5.6.7.8 match an interface)
west #
 ipsec add addconn--leftupdown=
"addconn--leftupdown=": added unoriented IKEv2 connection (neither left=1.2.3.4 nor right=5.6.7.8 match an interface)
west #
 ipsec add addconn--leftupdown=quotes
"addconn--leftupdown=quotes": added unoriented IKEv2 connection (neither left=1.2.3.4 nor right=5.6.7.8 match an interface)
west #
 ipsec add addconn--leftupdown=%disabled
"addconn--leftupdown=%disabled": added unoriented IKEv2 connection (neither left=1.2.3.4 nor right=5.6.7.8 match an interface)
west #
 ipsec add addconn--leftupdown=my-updown
conn addconn--leftupdown=my-updown: not found (tried aliases)
west #
 ipsec add addconn--leftupdown=left
"addconn--leftupdown=left": added unoriented IKEv2 connection (neither left=1.2.3.4 nor right=5.6.7.8 match an interface)
west #
 ipsec add addconn--rightupdown=right
"addconn--rightupdown=right": added unoriented IKEv2 connection (neither left=1.2.3.4 nor right=5.6.7.8 match an interface)
west #
 ipsec add addconn--type=passthrough
"addconn--type=passthrough": added unoriented passthrough connection (neither left=1.2.3.4 nor right=5.6.7.8 match an interface)
west #
 ipsec add addconn--type=passthrough--leftupdown=left
warning: "addconn--type=passthrough--leftupdown=left": leftupdown=left ignored for never-negotiate (type=passthrough) connection
"addconn--type=passthrough--leftupdown=left": added unoriented passthrough connection (neither left=1.2.3.4 nor right=5.6.7.8 match an interface)
west #
 ipsec add --auto=route addconn--updown-flags=exec
"addconn--updown-flags=exec": added oriented IKEv2 connection
west #
 grep -e PLUTO_VERB= -e PLUTO_CONNECTION= /tmp/updown.env
PLUTO_CONNECTION=addconn--updown-flags=exec
PLUTO_VERB=route-client
west #
 ipsec delete addconn--updown-flags=exec
west #
 ipsec whack --name whack                                      --host 1.2.3.4 --to --host 5.6.7.8
"whack": added unoriented IKEv2 connection (neither left=1.2.3.4 nor right=5.6.7.8 match an interface)
west #
 ipsec whack --name whack--updown=from  --updown=from          --host 1.2.3.4 --to --host 5.6.7.8
"whack--updown=from": added unoriented IKEv2 connection (neither left=1.2.3.4 nor right=5.6.7.8 match an interface)
west #
 ipsec whack --name whack--pass               --pass                --host 1.2.3.4 --to --host 5.6.7.8
"whack--pass": added unoriented passthrough connection (neither left=1.2.3.4 nor right=5.6.7.8 match an interface)
west #
 ipsec whack --name whack--pass--updown=from  --pass --updown=from  --host 1.2.3.4 --to --host 5.6.7.8
warning: "whack--pass--updown=from": leftupdown=from ignored for never-negotiate (type=pass) connection
"whack--pass--updown=from": added unoriented passthrough connection (neither left=1.2.3.4 nor right=5.6.7.8 match an interface)
west #
 ipsec connectionstatus | sed -n -e '/: .*updown=/ s/  */ /gp' | sort
"addconn--leftupdown=%disabled": leftupdown=<disabled>; leftupdown-flags=noasync,noexec; rightupdown=<disabled>; rightupdown-flags=noasync,noexec;
"addconn": leftupdown=ipsec _updown; leftupdown-flags=noasync,noexec; rightupdown=ipsec _updown; rightupdown-flags=noasync,noexec;
"addconn--leftupdown=left": leftupdown=left; leftupdown-flags=noasync,noexec; rightupdown=left; rightupdown-flags=noasync,noexec;
"addconn--leftupdown=": leftupdown=<disabled>; leftupdown-flags=noasync,noexec; rightupdown=<disabled>; rightupdown-flags=noasync,noexec;
"addconn--leftupdown=quotes": leftupdown=<disabled>; leftupdown-flags=noasync,noexec; rightupdown=<disabled>; rightupdown-flags=noasync,noexec;
"addconn--rightupdown=right": leftupdown=ipsec _updown; leftupdown-flags=noasync,noexec; rightupdown=ipsec _updown; rightupdown-flags=noasync,noexec;
"addconn--type=passthrough": leftupdown=<disabled>; leftupdown-flags=noasync,noexec; rightupdown=<disabled>; rightupdown-flags=noasync,noexec;
"addconn--type=passthrough--leftupdown=left": leftupdown=<disabled>; leftupdown-flags=noasync,noexec; rightupdown=<disabled>; rightupdown-flags=noasync,noexec;
"whack": leftupdown=ipsec _updown; leftupdown-flags=noasync,noexec; rightupdown=ipsec _updown; rightupdown-flags=noasync,noexec;
"whack--pass": leftupdown=<disabled>; leftupdown-flags=noasync,noexec; rightupdown=<disabled>; rightupdown-flags=noasync,noexec;
"whack--pass--updown=from": leftupdown=<disabled>; leftupdown-flags=noasync,noexec; rightupdown=<disabled>; rightupdown-flags=noasync,noexec;
"whack--updown=from": leftupdown=from; leftupdown-flags=noasync,noexec; rightupdown=from; rightupdown-flags=noasync,noexec;
west #
