#!/bin/sh
#

cd /source

# do don't trust all makefile dependancies, esp lib/
rm -rf /tmp/lsw_build modobj*

# sometimes left behind - an error in "make check"
rm -f lib/libipsecconf/lex.yy.c lib/libipsecconf/parser.dot lib/libipsecconf/parser.output lib/libipsecconf/parser.tab.c lib/libipsecconf/parser.tab.h

# we use /tmp because it is on tmpfs and compiles much faster, even faster
# than using ccache on the regular disk image files.
make OBJDIR=/tmp/lsw_build programs module 2>&1 > compile-log.txt
